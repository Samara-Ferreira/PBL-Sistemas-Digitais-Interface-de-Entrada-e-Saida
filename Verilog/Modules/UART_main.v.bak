module UART_main(
    input CLK_326,
    input data_seril,
    //output data [7:0],
    output enable_convert_serial;
);

    parameter IDLE = 2'b00,
              START = 2'b01,
              DATA = 2'b10,
              STOP = 2'b11;

    reg [1:0] state;
    reg [2:0] cont_8bits;


    always @(posedge CLK_326) begin
        case (state)
            IDLE:begin
                if (data_seril == 0) state <= START;
                else state <= IDLE;

                enable_convert_serial <= 0;
                cont_8bits <= 0;
            end 
            START: begin
               state <= DATA;

               enable_convert_serial <= 0;
               cont_8bits <= 0;      
            end
            DATA: begin
                if (cont_8bits == 3'111) 
                    state <= STOP;
                else state <= DATA;

                enable_convert_serial <= 1;
                cont_8bits = cont_8bits + 1;
            end
            STOP:begin
                state <= IDLE;

                cont_8bits <= 0;
                enable_convert_serial <= 0;
            end
            default: begin
                state <= IDLE;

                cont_8bits <= 0;
                enable_convert_serial <= 0;
            end
        endcase
    end



endmodule